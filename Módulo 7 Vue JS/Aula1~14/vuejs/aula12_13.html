<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 11</title>
    <!-- Link do bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- Link do vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <div id="app">
        <h1><countdown-timer :total-minutes="2" :total-seconds="30"></countdown-timer></h1>        
    </div>

<script>

    const TIMER_STATE = {
        running: 'Running',
        stopped: 'Stopped',
        paused: 'Paused'
    }

    Vue.component('countdown-timer',{
        template: ` <div> 
                        <span>{{timerMinutes}}:{{timerSeconds}}</span></br>
                        <button class="btn btn-success" @click="start">Start</button>
                        <button class="btn btn-warning" @click="pause">Pause</button>
                        <button class="btn btn-danger" @click="reset">Reset</button>
                    </div>`,
        data(){
            return{
                timerMinutes: 0,
                timerSeconds: 0,
                TIMER_STATE: TIMER_STATE.stopped
            }
        },
        props: {
            totalMinutes: {
                type: Number,
                default: 1
            },
            totalSeconds: {
                type: Number,
                default: 0
            }
        },
        mounted(){
            this.timerMinutes = this.totalMinutes;
            this.timerSeconds = this.totalSeconds;
        },

        methods: {
            start(){
                this._tick();
                this.ticking = setInterval(this._tick, 1000);
                this.timerState = TIMER_STATE.running;
            },
            pause(){
                clearInterval(this.ticking);
                this.timerState = TIMER_STATE.paused;
            },
            reset(){
                this.timerMinutes = this.totalMinutes;
                this.timerSeconds = this.totalSeconds;
                clearInterval(this.ticking);
                this.timerState = TIMER_STATE.stopped;
            },
            _tick(){
                if(this.timerSeconds !== 0){
                    this.timerSeconds--;
                    return;
                } 

                if(this.timerSeconds == 0){
                    this.timerMinutes--;
                    this.timerSeconds=59;
                    return;
                }
            }                               
        }
    })

    let app = new Vue({
        el: '#app',
    })

</script>

</body>



</html>















